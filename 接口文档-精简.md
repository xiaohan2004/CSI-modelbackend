# CSI API 文档

## 基础信息
- **基础URL**: `http://127.0.0.1:5000`
- **响应格式**: JSON

## API 端点

### 1. 训练模型
**POST** `/api/create_model`

创建并训练一个新的模型。

#### 请求体
```json
{
    "model_name":"LSTM",
    "signal_processing_method": "raw",
    "model_feature": "CSI功率",
    "model_saved_name":"test_model",
    "data": [
        {
            "id": 404215,
            "deviceId": "device1",
            "timestamp": 1742898507975,
            "csiData": "{\"imag\": [0.0, 0.0, 7.0, 7.0, 7.0, 6.0, 6.0, 5.0, 5.0, 4.0, 4.0, 4.0, 4.0, 3.0, 3.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 6.0, 6.0, 6.0, 7.0, 7.0, 7.0, 7.0, 7.0, 7.0, 8.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 8.0, 8.0, 8.0, 8.0, 8.0, 8.0, 8.0, 8.0, 8.0], \"real\": [0.0, 0.0, -24.0, -23.0, -22.0, -21.0, -20.0, -19.0, -18.0, -17.0, -16.0, -16.0, -16.0, -15.0, -14.0, -13.0, -13.0, -13.0, -12.0, -11.0, -10.0, -10.0, -9.0, -9.0, -8.0, -7.0, -6.0, -2.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -5.0, -19.0, -18.0, -18.0, -18.0, -19.0, -19.0, -20.0, -21.0, -21.0, -21.0, -22.0, -22.0, -21.0, -22.0, -22.0, -22.0, -22.0, -22.0, -23.0, -24.0, -24.0, -24.0, -25.0, -25.0, -25.0, -25.0]}",
            "processed": 1
        },
        {
            "id": 404216,
            "deviceId": "device1",
            "timestamp": 1742898507978,
            "csiData": "{\"imag\": [0.0, 0.0, 25.0, 24.0, 23.0, 22.0, 21.0, 20.0, 19.0, 19.0, 19.0, 17.0, 16.0, 15.0, 15.0, 15.0, 14.0, 13.0, 12.0, 12.0, 11.0, 10.0, 8.0, 7.0, 7.0, 7.0, 6.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 5.0, 20.0, 20.0, 21.0, 21.0, 21.0, 22.0, 22.0, 23.0, 23.0, 23.0, 23.0, 23.0, 23.0, 23.0, 23.0, 23.0, 24.0, 24.0, 25.0, 25.0, 25.0, 26.0, 27.0, 27.0, 27.0, 28.0], \"real\": [0.0, 0.0, 18.0, 18.0, 17.0, 16.0, 15.0, 14.0, 13.0, 12.0, 12.0, 11.0, 11.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 9.0, 9.0, 8.0, 8.0, 8.0, 8.0, 8.0, 2.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.0, 13.0, 13.0, 14.0, 14.0, 15.0, 16.0, 16.0, 17.0, 18.0, 19.0, 19.0, 19.0, 19.0, 19.0, 19.0, 19.0, 19.0, 20.0, 19.0, 19.0, 19.0, 19.0, 19.0, 20.0, 20.0, 19.0]}",
            "processed": 1
        }
    ]
}
```

### 2. 获取模型
**GET** `/api/get_model`

获取指定UUID的模型信息。

#### 查询参数
- `uuid`: 模型的唯一标识符

#### 示例
```
/api/get_model?uuid=ce7b317e-1808-40a1-9639-b8c289bb50c5
```

### 3. 删除模型
**GET** `/api/delete_model`

删除指定UUID的模型。

#### 查询参数
- `uuid`: 模型的唯一标识符

#### 示例
```
/api/delete_model?uuid=ef879cfa-07e2-439a-9c42-a20a9983f99d
```


### 4. 信号处理
**POST** `/api/process_signal`

处理CSI信号数据。

#### 请求体 (multipart/form-data)
- `json_data`: JSON字符串，包含处理配置
  ```json
  {
      "select_producer": "read from serial",
      "select_channel": 2,
      "signal_processor_methods": "raw",
      "select_feature": "振幅"
  }
  ```
- `file`: CSV文件，包含要处理的CSI数据

### 5. 模型预测
**POST** `/api/predict`

使用已训练的模型进行预测。

#### 请求体 (multipart/form-data)
- `json_data`: JSON字符串，包含预测配置
```json
{
    "model_uuid": "ce7b317e-1808-40a1-9639-b8c289bb50c5",
    "signal_process_method": "raw",
    "feature_type": "振幅"
}
```
- `file`: CSV文件，包含要预测的CSI数据

## 数据格式说明

### CSI数据格式
CSI数据包含实部和虚部，每个部分都是一个包含64个值的数组：
- `real`: 实部数组
- `imag`: 虚部数组

### 时间戳
所有时间戳均使用毫秒级UNIX时间戳。

## 注意事项
1. 文件上传接口需要使用`multipart/form-data`格式
2. 所有模型相关操作都需要提供UUID作为唯一标识
3. CSV文件格式需要符合系统要求的格式
4. 请确保请求体中的JSON数据格式正确